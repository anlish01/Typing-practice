<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞èÂ≠¶ÁîüÈîÆÁõòÊåáÊ≥ïÁªÉ‰π†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 25px;
            max-width: 750px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #5a67d8;
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .game-area {
            margin: 30px 0;
        }

        .target-key {
            font-size: 2.8em;
            color: #e53e3e;
            font-weight: bold;
            margin: 15px 0;
            padding: 20px 40px;
            border: 3px solid #e53e3e;
            border-radius: 15px;
            background: linear-gradient(135deg, #fff5f5, #fed7d7);
            display: inline-block;
            min-width: 120px;
            animation: pulse 2s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .target-key:hover {
            background: linear-gradient(135deg, #fed7d7, #feb2b2);
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .keyboard {
            background: #f7fafc;
            border-radius: 10px;
            padding: 10px;
            margin: 15px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            margin: 4px 0;
            gap: 3px;
        }

        .key {
            background: #e2e8f0;
            border: none;
            border-radius: 8px;
            padding: 12px 14px;
            font-size: 1.1em;
            font-weight: bold;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 45px;
            position: relative;
        }

        .key:hover {
            background: #cbd5e0;
            transform: translateY(-2px);
        }

        .key.active {
            background: #4299e1;
            color: white;
            transform: translateY(2px);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .key.target {
            background: #ffd700;
            color: #2d3748;
            animation: targetPulse 1s infinite;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        @keyframes targetPulse {
            0% { 
                background: #ffd700;
                transform: scale(1);
            }
            50% { 
                background: #ffed4e;
                transform: scale(1.1);
            }
            100% { 
                background: #ffd700;
                transform: scale(1);
            }
        }

        .key.correct {
            background: #48bb78;
            color: white;
            animation: correctPop 0.5s ease;
        }

        @keyframes correctPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .key.wrong {
            background: #f56565;
            color: white;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .space-key {
            min-width: 200px;
            background: #a0aec0;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            gap: 10px;
        }

        .stat-box {
            background: #edf2f7;
            padding: 10px;
            border-radius: 10px;
            flex: 1;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #5a67d8;
        }

        .controls {
            margin: 10px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
        }

        .btn {
            background: #5a67d8;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            min-width: 60px;
        }

        .btn:hover {
            background: #4c51bf;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .btn:active, .btn.active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background: #38a169;
        }



        .mode-selector {
            margin: 10px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }

        .mode-btn {
            background: #ed8936;
            padding: 8px 16px;
            font-size: 1em;
            margin: 0;
        }

        .mode-btn.active {
            background: #38a169;
        }



        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .key {
                padding: 10px 12px;
                font-size: 1em;
                min-width: 35px;
            }

            .space-key {
                min-width: 200px;
            }

            .stats {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Â∞èÂ≠¶ÁîüÈîÆÁõòÊåáÊ≥ïÁªÉ‰π†</h1>

        <div class="mode-selector">
            <button class="btn mode-btn active" data-mode="basic">Âü∫Á°ÄÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="left">Â∑¶ÊâãÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="right">Âè≥ÊâãÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="numbers">Êï∞Â≠óÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="symbols">Á¨¶Âè∑ÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="words">ÂçïËØçÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="sentences">Âè•Â≠êÁªÉ‰π†</button>
            <button class="btn mode-btn" data-mode="zuowen">‰ΩúÊñáËØ≠Âè•</button>
        </div>

        <div class="game-area">
            <div class="target-key" id="targetKey" onclick="typingGame.startGame()">Êåâ<ÂºÄÂßãÁªÉ‰π†>ÂºÄÂßã</div>
        </div>

        <div class="keyboard">
            <!-- Êï∞Â≠óË°å - ÂåÖÂê´Á¨¶Âè∑ -->
            <div class="keyboard-row">
                <button class="key" data-key="`">`</button>
                <button class="key" data-key="1">1<br><span style="font-size: 0.7em;">!</span></button>
                <button class="key" data-key="2">2<br><span style="font-size: 0.7em;">@</span></button>
                <button class="key" data-key="3">3<br><span style="font-size: 0.7em;">#</span></button>
                <button class="key" data-key="4">4<br><span style="font-size: 0.7em;">$</span></button>
                <button class="key" data-key="5">5<br><span style="font-size: 0.7em;">%</span></button>
                <button class="key" data-key="6">6<br><span style="font-size: 0.7em;">^</span></button>
                <button class="key" data-key="7">7<br><span style="font-size: 0.7em;">&</span></button>
                <button class="key" data-key="8">8<br><span style="font-size: 0.7em;">*</span></button>
                <button class="key" data-key="9">9<br><span style="font-size: 0.7em;">(</span></button>
                <button class="key" data-key="0">0<br><span style="font-size: 0.7em;">)</span></button>
                <button class="key" data-key="-">-<br><span style="font-size: 0.7em;">_</span></button>
                <button class="key" data-key="=">=<br><span style="font-size: 0.7em;">+</span></button>
                <button class="key" data-key="backspace" style="min-width: 80px;">ÈÄÄÊ†º</button>
            </div>
            
            <!-- Â≠óÊØçË°å1 -->
            <div class="keyboard-row">
                <button class="key" data-key="tab" style="min-width: 60px;">Tab</button>
                <button class="key" data-key="q">Q</button>
                <button class="key" data-key="w">W</button>
                <button class="key" data-key="e">E</button>
                <button class="key" data-key="r">R</button>
                <button class="key" data-key="t">T</button>
                <button class="key" data-key="y">Y</button>
                <button class="key" data-key="u">U</button>
                <button class="key" data-key="i">I</button>
                <button class="key" data-key="o">O</button>
                <button class="key" data-key="p">P</button>
                <button class="key" data-key="[">[<br><span style="font-size: 0.7em;">{</span></button>
                <button class="key" data-key="]">]<br><span style="font-size: 0.7em;">}</span></button>
                <button class="key" data-key="backslash">\\<br><span style="font-size: 0.7em;">|</span></button>
            </div>
            
            <!-- Â≠óÊØçË°å2 -->
            <div class="keyboard-row">
                <button class="key" data-key="caps" style="min-width: 70px;">Caps</button>
                <button class="key" data-key="a">A</button>
                <button class="key" data-key="s">S</button>
                <button class="key" data-key="d">D</button>
                <button class="key" data-key="f">F</button>
                <button class="key" data-key="g">G</button>
                <button class="key" data-key="h">H</button>
                <button class="key" data-key="j">J</button>
                <button class="key" data-key="k">K</button>
                <button class="key" data-key="l">L</button>
                <button class="key" data-key=";">;<br><span style="font-size: 0.7em;">:</span></button>
                <button class="key" data-key="'">'<br><span style="font-size: 0.7em;">"</span></button>
                <button class="key" data-key="enter" style="min-width: 80px;">Enter</button>
            </div>
            
            <!-- Â≠óÊØçË°å3 -->
            <div class="keyboard-row">
                <button class="key" data-key="shift" style="min-width: 90px;">Shift</button>
                <button class="key" data-key="z">Z</button>
                <button class="key" data-key="x">X</button>
                <button class="key" data-key="c">C</button>
                <button class="key" data-key="v">V</button>
                <button class="key" data-key="b">B</button>
                <button class="key" data-key="n">N</button>
                <button class="key" data-key="m">M</button>
                <button class="key" data-key=",">,<br><span style="font-size: 0.7em;">&lt;</span></button>
                <button class="key" data-key=".">.<br><span style="font-size: 0.7em;">&gt;</span></button>
                <button class="key" data-key="/">/<br><span style="font-size: 0.7em;">?</span></button>
                <button class="key" data-key="shift2" style="min-width: 90px;">Shift</button>
            </div>
            
            <!-- Á©∫Ê†ºË°å -->
            <div class="keyboard-row">
                <button class="key" data-key="ctrl" style="min-width: 60px;">Ctrl</button>
                <button class="key" data-key="win" style="min-width: 50px;">Win</button>
                <button class="key" data-key="alt" style="min-width: 50px;">Alt</button>
                <button class="key space-key" data-key=" ">Á©∫Ê†ºÈîÆ</button>
                <button class="key" data-key="alt2" style="min-width: 50px;">Alt</button>
                <button class="key" data-key="win2" style="min-width: 50px;">Win</button>
                <button class="key" data-key="ctrl2" style="min-width: 60px;">Ctrl</button>
            </div>
        </div>

        <div class="stats">
            <div class="stat-box">
                <div>ÂáÜÁ°ÆÁéá</div>
                <div class="stat-number" id="accuracy">0%</div>
            </div>
            <div class="stat-box">
                <div>Ê≠£Á°ÆÊåâÈîÆ</div>
                <div class="stat-number" id="correct">0</div>
            </div>
            <div class="stat-box">
                <div>ÊÄªÊåâÈîÆ</div>
                <div class="stat-number" id="total">0</div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="startBtn">ÂºÄÂßãÁªÉ‰π†</button>
            <button class="btn" id="resetBtn">ÈáçÁΩÆ</button>
            <button class="btn" id="slowBtn">ÊÖ¢ÈÄü</button>
            <button class="btn active" id="normalBtn">‰∏≠ÈÄü</button>
            <button class="btn" id="fastBtn">Âø´ÈÄü</button>
        </div>


    </div>

    <script>
        // ÂÆåÊï¥ÁöÑÊ±âÂ≠óËΩ¨ÊãºÈü≥Êò†Â∞ÑË°®
        const pinyinMap = {
            'Êàë': 'wo', 'Áà±': 'ai', 'ÁöÑ': 'de', 'ÂÆ∂': 'jia',
            '‰ªä': 'jin', 'Â§©': 'tian', 'Ê∞î': 'qi', 'Âæà': 'hen', 'Â•Ω': 'hao',
            'Âíå': 'he', 'Â∞è': 'xiao', 'Êúã': 'peng', 'Âèã': 'you', '‰∏Ä': 'yi', 'Ëµ∑': 'qi', 'Áé©': 'wan',
            'Âñú': 'xi', 'Ê¨¢': 'huan', 'ÂêÉ': 'chi', 'Ëãπ': 'ping', 'Êûú': 'guo',
            'Â¶à': 'ma', 'ÂØπ': 'dui', 'Â≠¶': 'xue', 'Ê†°': 'xiao', 'Èáå': 'li', 'Êúâ': 'you', 'Â§ö': 'duo', '‰π¶': 'shu',
            'ËÄÅ': 'lao', 'Â∏à': 'shi', 'Êïô': 'jiao', '‰ª¨': 'men', '‰π†': 'xi',
            '‰∏™': 'ge', 'Â¶π': 'mei', 'Â¶π': 'mei',
            'Áà∏': 'ba', 'Â∏¶': 'dai', 'Âéª': 'qu', 'ÂÖ¨': 'gong', 'Âõ≠': 'yuan',
            'Áîª': 'hua', '‰∏ä': 'shang', 'ÁôΩ': 'bai', '‰∫ë': 'yun',
            'È∏ü': 'niao', 'Âú®': 'zai', 'È£û': 'fei',
            'Ëä±': 'hua', 'ÂÑø': 'er', 'ÂºÄ': 'kai', '‰∫Ü': 'le', 'Áæé': 'mei', '‰∏Ω': 'li',
            'Ëçâ': 'cao', 'Áªø': 'lv',
            'Âø´': 'kuai', '‰πê': 'le',
            'Êñ∞': 'xin', '‰π¶': 'shu', 'ÂåÖ': 'bao',
            'ÂºÄ': 'kai', 'ÂøÉ': 'xin',
            'Âêå': 'tong', '‰∏ä': 'shang', 'Â≠¶': 'xue',
            'ÂÜ∞': 'bing', 'Ê∑á': 'qi', 'Ê∑ã': 'lin',
            'Áà∑': 'ye', 'Áà∑': 'ye', 'ËÆ≤': 'jiang', 'ÊïÖ': 'gu', '‰∫ã': 'shi', 'Áªô': 'gei', 'Âê¨': 'ting',
            'Â•∂': 'nai', 'Â•∂': 'nai', 'ÂÅö': 'zuo', 'Â•Ω': 'hao', 'È•≠': 'fan', 'Ëèú': 'cai',
            'Áãó': 'gou', 'ÂèØ': 'ke', 'Áà±': 'ai',
            '‰π∞': 'mai', 'Ë°£': 'yi', 'Êúç': 'fu',
            'ÂÆ∂': 'jia', 'Èáå': 'li', 'Áúã': 'kan', '‰π¶': 'shu',
            'Â∏Æ': 'bang', 'Êâ´': 'sao', 'Âú∞': 'di',
            'È™ë': 'qi', 'Ëá™': 'zi', 'Ë°å': 'xing', 'ËΩ¶': 'che',
            'ÂÖ∑': 'ju',
            'Ëä±': 'hua', 'Âõ≠': 'yuan', 'ÊºÇ': 'piao', '‰∫Æ': 'liang',
            'ËØ≠': 'yu', 'Êñá': 'wen', 'ËØæ': 'ke',
            // Êñ∞Â¢ûÊ±âÂ≠óÊãºÈü≥
            'Êò•': 'chun', 'Â§è': 'xia', 'Áßã': 'qiu', 'ÂÜ¨': 'dong',
            'Ê†ë': 'shu', 'Âè∂': 'ye', 'Âèò': 'bian', 'ÈªÑ': 'huang',
            'Èõ™': 'xue', 'Áúü': 'zhen', 'Â≠¶': 'xue', '‰ºö': 'hui', 'Â≠ó': 'zi',
            'Êï∞': 'shu', 'Âæó': 'de', 'ÂàÜ': 'fen', 'Ê°å': 'zhuo',
            'Ë∑Ø': 'lu', '‰π∞': 'mai', 'ÈìÖ': 'qian', 'Á¨î': 'bi',
            'Èïø': 'zhang', 'Â§ß': 'da', 'ÂΩì': 'dang', 'Áßë': 'ke', 'Â≠¶': 'xue', 'ÂÆ∂': 'jia',
            'Âä©': 'zhu', '‰∫∫': 'ren', 'Âø´': 'kuai', '‰πê': 'le'
        };

        // Ê±âÂ≠óËΩ¨ÊãºÈü≥ÂáΩÊï∞
            function chineseToPinyin(text) {
                return text.split('').map(char => pinyinMap[char] || char).join('');
            }

            // Ëé∑ÂèñÊï¥‰∏™Âè•Â≠êÁöÑÊãºÈü≥
            function getFullPinyin(text) {
                return text.split('').map(char => pinyinMap[char] || char).join('');
            }

        class KeyboardGame {
            constructor() {
                this.currentKey = '';
                this.isPlaying = false;
                this.correctCount = 0;
                this.totalCount = 0;
                this.currentMode = 'basic';
                
                this.modes = {
                basic: {
                    keys: ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm'],
                    name: 'Âü∫Á°ÄÁªÉ‰π†'
                },
                left: {
                    keys: ['q', 'w', 'e', 'r', 't', 'a', 's', 'd', 'f', 'g', 'z', 'x', 'c', 'v', 'b'],
                    name: 'Â∑¶ÊâãÁªÉ‰π†'
                },
                right: {
                    keys: ['y', 'u', 'i', 'o', 'p', 'h', 'j', 'k', 'l', 'n', 'm'],
                    name: 'Âè≥ÊâãÁªÉ‰π†'
                },
                numbers: {
                    keys: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],
                    name: 'Êï∞Â≠óÁªÉ‰π†'
                },
                symbols: {
                    keys: ['-', '=', '[', ']', ';', "'", ',', '.', '/', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],
                    name: 'Á¨¶Âè∑ÁªÉ‰π†'
                },
                words: {
                    name: 'ÂçïËØçÁªÉ‰π†',
                    content: [
                        // Âü∫Á°ÄÂä®Áâ©
                        'cat', 'dog', 'bird', 'fish', 'duck', 'frog', 'bear', 'lion', 'tiger', 'rabbit',
                        // Êó•Â∏∏Áâ©ÂìÅ
                        'book', 'pen', 'desk', 'chair', 'bag', 'cup', 'ball', 'toy', 'shoe', 'hat',
                        // Ëá™ÁÑ∂Áé∞Ë±°
                        'sun', 'moon', 'star', 'tree', 'flower', 'grass', 'sky', 'cloud', 'rain', 'snow',
                        // Âä®‰ΩúËØçÊ±á
                        'run', 'jump', 'walk', 'swim', 'sing', 'dance', 'read', 'write', 'play', 'eat',
                        // ‰∫∫Áâ©Áß∞Âëº
                        'mom', 'dad', 'teacher', 'friend', 'baby', 'girl', 'boy', 'sister', 'brother', 'family'
                    ]
                },
                sentences: {
                    name: 'Âè•Â≠êÁªÉ‰π†',
                    content: [
                        // ÂéüÊúâÂè•Â≠ê
                        'I love my cat.', 'The sun is bright.', 'I can run fast.', 'This is fun!', 'I have a book.',
                        // Êñ∞Â¢û20Âè•
                        // ÂÆ∂Â∫≠‰∏ªÈ¢ò
                        'My mom is very kind.', 'I love my family.', 'Dad reads me stories.', 'My sister is my friend.',
                        // Â≠¶Ê†°ÁîüÊ¥ª
                        'I go to school every day.', 'My teacher is nice.', 'I like my classmates.', 'We play at recess.',
                        // Êó•Â∏∏Ê¥ªÂä®
                        'I eat breakfast at home.', 'I brush my teeth daily.', 'I help my mom cook.', 'I walk to school.',
                        // ÂÖ¥Ë∂£Áà±Â•Ω
                        'I love drawing pictures.', 'Reading books is fun.', 'I can sing songs.', 'Dancing makes me happy.',
                        // Ëá™ÁÑ∂Â§©Ê∞î
                        'The sky is blue today.', 'It is raining now.', 'I see a rainbow.', 'The flowers are beautiful.', 'Birds can fly high.'
                    ]
                },
                zuowen: {
                    name: '‰ΩúÊñáËØ≠Âè•',
                    content: [
                        // ÂéüÊúâ30Âè•
                        'ÊàëÁà±ÊàëÁöÑÂÆ∂',
                        '‰ªäÂ§©Â§©Ê∞îÂæàÂ•Ω',
                        'ÊàëÂíåÂ∞èÊúãÂèã‰∏ÄËµ∑Áé©',
                        'ÊàëÂñúÊ¨¢ÂêÉËãπÊûú',
                        'Â¶àÂ¶àÂØπÊàëÂæàÂ•Ω',
                        'Â≠¶Ê†°ÈáåÊúâÂæàÂ§ö‰π¶',
                        'ËÄÅÂ∏àÊïôÊàë‰ª¨Â≠¶‰π†',
                        'ÊàëÊúâ‰∏Ä‰∏™Â¶πÂ¶π',
                        'Áà∏Áà∏Â∏¶ÊàëÂéªÂÖ¨Âõ≠',
                        'ÊàëÂñúÊ¨¢ÁîªÁîª',
                        'Â§©‰∏äÊúâÁôΩ‰∫ë',
                        'Â∞èÈ∏üÂú®È£û',
                        'Ëä±ÂÑøÂºÄ‰∫ÜÂæàÁæé‰∏Ω',
                        'Â∞èËçâÁªø‰∫Ü',
                        'ÊàëÂú®Â≠¶Ê†°ÂæàÂø´‰πê',
                        'ÊàëÁà±ÊàëÁöÑËÄÅÂ∏à',
                        'ÊàëÊúâÊñ∞ÁöÑ‰π¶ÂåÖ',
                        '‰ªäÂ§©ÊàëÂæàÂºÄÂøÉ',
                        'ÊàëÂíåÂêåÂ≠¶‰∏ÄËµ∑‰∏äÂ≠¶',
                        'ÊàëÂñúÊ¨¢ÂêÉÂÜ∞Ê∑áÊ∑ã',
                        'Áà∑Áà∑ËÆ≤ÊïÖ‰∫ãÁªôÊàëÂê¨',
                        'Â•∂Â•∂ÂÅöÂ•ΩÂêÉÁöÑÈ•≠Ëèú',
                        'ÊàëÁöÑÂ∞èÁãóÂæàÂèØÁà±',
                        'Â¶àÂ¶à‰π∞‰∫ÜÊñ∞Ë°£Êúç',
                        'ÊàëÂú®ÂÆ∂ÈáåÁúã‰π¶',
                        'ÊàëÂ∏ÆÂ¶àÂ¶àÊâ´Âú∞',
                        'Áà∏Áà∏ÊïôÊàëÈ™ëËá™Ë°åËΩ¶',
                        'ÊàëÊúâÊñ∞ÁöÑÁé©ÂÖ∑',
                        'Â≠¶Ê†°ÁöÑËä±Âõ≠ÂæàÊºÇ‰∫Æ',
                        'ÊàëÂñúÊ¨¢‰∏äËØ≠ÊñáËØæ',
                        // Êñ∞Â¢û10Âè•
                        // Â≠£ËäÇÂ§©Ê∞î
                        'Êò•Â§©Êù•‰∫ÜËä±ÂÑøÂºÄ‰∫Ü',
                        'Â§èÂ§©ÂæàÁÉ≠ÂèØ‰ª•ÂêÉÂÜ∞Ê∑áÊ∑ã',
                        'ÁßãÂ§©Ê†ëÂè∂ÂèòÈªÑ‰∫Ü',
                        'ÂÜ¨Â§©‰ºö‰∏ãÈõ™ÁúüÁæé‰∏Ω',
                        // Â≠¶‰π†ÁîüÊ¥ª
                        'Êàë‰ªäÂ§©Â≠¶‰ºö‰∫ÜÊñ∞Â≠ó',
                        'Êï∞Â≠¶ËØæÊàëÂæó‰∫Ü100ÂàÜ',
                        'ÊàëÂíåÂêåÊ°å‰∏ÄËµ∑ÁîªÁîª',
                        'ÊîæÂ≠¶Ë∑Ø‰∏äÊàë‰π∞ÈìÖÁ¨î',
                        // ÊÉÖÊÑüË°®Ëææ
                        'ÊàëÈïøÂ§ßË¶ÅÂΩìÁßëÂ≠¶ÂÆ∂',
                        'Â∏ÆÂä©Âà´‰∫∫ÊàëÂæàÂø´‰πê'
                    ]
                }
            };

                this.init();
            }

            init() {
                this.targetKeyEl = document.getElementById('targetKey');
                this.startBtn = document.getElementById('startBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.accuracyEl = document.getElementById('accuracy');
                this.correctEl = document.getElementById('correct');
                this.totalEl = document.getElementById('total');

                this.currentWord = '';
                this.currentIndex = 0;
                this.typingMode = false;

                this.bindEvents();
                this.updateDisplay();
            }

            bindEvents() {
                this.startBtn.addEventListener('click', () => this.startGame());
                this.resetBtn.addEventListener('click', () => this.resetGame());
                document.getElementById('slowBtn').addEventListener('click', () => this.setSpeed(2000));
                document.getElementById('normalBtn').addEventListener('click', () => this.setSpeed(1500));
                document.getElementById('fastBtn').addEventListener('click', () => this.setSpeed(1000));

                // ÈîÆÁõòÁÇπÂáª‰∫ã‰ª∂
                document.querySelectorAll('.key').forEach(key => {
                    key.addEventListener('click', (e) => {
                        if (this.isPlaying) {
                            this.checkKey(key.dataset.key);
                        }
                    });
                });

                // ÈîÆÁõòÊåâÈîÆ‰∫ã‰ª∂
                document.addEventListener('keydown', (e) => {
                    if (this.isPlaying) {
                        e.preventDefault();
                        this.checkKey(e.key.toLowerCase());
                        this.highlightKey(e.key.toLowerCase());
                    }
                });

                // Ê®°ÂºèÂàáÊç¢
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.switchMode(e.target.dataset.mode);
                    });
                });
            }

            switchMode(mode) {
                this.currentMode = mode;
                document.querySelectorAll('.mode-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
                this.resetGame();
            }

            startGame() {
                this.isPlaying = true;
                this.speed = this.speed || 1500;
                this.generateNewKey();
                this.startBtn.textContent = 'ÁªÉ‰π†‰∏≠...';
                this.startBtn.disabled = true;
            }

            resetGame() {
                this.isPlaying = false;
                this.correctCount = 0;
                this.totalCount = 0;
                this.currentKey = '';
                this.currentWord = '';
                this.currentIndex = 0;
                this.typingMode = false;
                this.pinyinProgress = '';
                this.currentPinyin = '';
                this.targetKeyEl.textContent = 'Êåâ<ÂºÄÂßãÁªÉ‰π†>ÂºÄÂßã';
                this.targetKeyEl.className = 'target-key';
                this.startBtn.textContent = 'ÂºÄÂßãÁªÉ‰π†';
                this.startBtn.disabled = false;
                this.updateDisplay();
                this.clearAllHighlights();
            }

            setSpeed(ms) {
                this.speed = ms;
                // Êõ¥Êñ∞ÊåâÈíÆÊ†∑Âºè
                document.querySelectorAll('.controls .btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                if (ms === 2000) document.getElementById('slowBtn').classList.add('active');
                if (ms === 1500) document.getElementById('normalBtn').classList.add('active');
                if (ms === 1000) document.getElementById('fastBtn').classList.add('active');
            }

            generateNewKey() {
                if (this.currentMode === 'words' || this.currentMode === 'sentences') {
                    this.typingMode = true;
                    const content = this.modes[this.currentMode].content;
                    this.currentWord = content[Math.floor(Math.random() * content.length)];
                    this.currentIndex = 0;
                    this.displayTypingText();
                } else if (this.currentMode === 'zuowen') {
                    // ‰ΩúÊñáÊ®°ÂºèÁâπÊÆäÂ§ÑÁêÜ
                    this.typingMode = true;
                    const content = this.modes[this.currentMode].content;
                    this.currentWord = content[Math.floor(Math.random() * content.length)];
                    this.currentPinyin = getFullPinyin(this.currentWord);
                    this.currentIndex = 0;
                    this.pinyinIndex = 0;
                    this.displayZuowenText();
                } else {
                    this.typingMode = false;
                    const keys = this.modes[this.currentMode].keys;
                    this.currentKey = keys[Math.floor(Math.random() * keys.length)];
                    this.targetKeyEl.textContent = this.currentKey.toUpperCase();
                    this.targetKeyEl.className = 'target-key';
                    
                    // È´ò‰∫ÆÊòæÁ§∫ÂØπÂ∫îÁöÑÈîÆÁõòÊåâÈîÆ
                    this.highlightTargetKey();
                }
            }

            displayTypingText() {
                let displayText = '';
                for (let i = 0; i < this.currentWord.length; i++) {
                    if (i < this.currentIndex) {
                        displayText += `<span style="color: #48bb78;">${this.currentWord[i]}</span>`;
                    } else if (i === this.currentIndex) {
                        displayText += `<span style="color: #e53e3e; font-size: 1.2em;">${this.currentWord[i]}</span>`;
                    } else {
                        displayText += `<span style="color: #2d3748;">${this.currentWord[i]}</span>`;
                    }
                }
                this.targetKeyEl.innerHTML = displayText;
                this.targetKeyEl.className = 'target-key';
                
                // È´ò‰∫ÆÂΩìÂâçÈúÄË¶ÅËæìÂÖ•ÁöÑÂ≠óÁ¨¶
                this.highlightTypingKey();
            }

            displayZuowenText() {
                let displayText = '';
                let pinyinDisplay = '';
                
                // ÊòæÁ§∫‰∏≠ÊñáÂè•Â≠ê
                for (let i = 0; i < this.currentWord.length; i++) {
                    if (i < this.currentIndex) {
                        displayText += `<span style="color: #48bb78;">${this.currentWord[i]}</span>`;
                    } else if (i === this.currentIndex) {
                        displayText += `<span style="color: #e53e3e; font-size: 1.2em;">${this.currentWord[i]}</span>`;
                    } else {
                        displayText += `<span style="color: #2d3748;">${this.currentWord[i]}</span>`;
                    }
                }
                
                // ÊòæÁ§∫ÊãºÈü≥ËæìÂÖ•ËøõÂ∫¶
                const currentCharPinyin = pinyinMap[this.currentWord[this.currentIndex]] || '';
                if (currentCharPinyin) {
                    const progress = this.pinyinProgress || '';
                    const remaining = currentCharPinyin.substring(progress.length);
                    pinyinDisplay = `<div style="font-size: 1.2em; color: #666; margin-top: 10px; font-family: monospace;">
                        <span style="color: #48bb78;">${progress}</span>
                        <span style="color: #e53e3e; text-decoration: underline;">${remaining}</span>
                    </div>`;
                }
                
                this.targetKeyEl.innerHTML = displayText + pinyinDisplay;
                this.targetKeyEl.className = 'target-key';
                
                // È´ò‰∫ÆÂΩìÂâçÈúÄË¶ÅËæìÂÖ•ÁöÑÂ≠óÁ¨¶
                this.highlightZuowenKey();
            }

            highlightTypingKey() {
                this.clearAllHighlights();
                if (this.currentIndex < this.currentWord.length) {
                    const char = this.currentWord[this.currentIndex].toLowerCase();
                    let key = char;
                    if (char === ' ') key = ' ';
                    const keyEl = document.querySelector(`[data-key="${key}"]`);
                    if (keyEl) {
                        keyEl.classList.add('target');
                    }
                }
            }

            highlightZuowenKey() {
                this.clearAllHighlights();
                if (this.currentIndex < this.currentWord.length) {
                    const pinyin = pinyinMap[this.currentWord[this.currentIndex]] || '';
                    if (pinyin) {
                        const progress = this.pinyinProgress || '';
                        const nextLetter = pinyin[progress.length];
                        if (nextLetter) {
                            const keyEl = document.querySelector(`[data-key="${nextLetter}"]`);
                            if (keyEl) {
                                keyEl.classList.add('target');
                            }
                        }
                    }
                }
            }

            highlightTargetKey() {
                // Ê∏ÖÈô§‰πãÂâçÁöÑÈ´ò‰∫Æ
                document.querySelectorAll('.key').forEach(key => {
                    key.classList.remove('target');
                });

                // È´ò‰∫ÆÂΩìÂâçÁõÆÊ†áÊåâÈîÆ
                const keyEl = document.querySelector(`[data-key="${this.currentKey}"]`);
                if (keyEl) {
                    keyEl.classList.add('target');
                }
            }

            checkKey(pressedKey) {
                if (this.typingMode) {
                    this.handleTypingKey(pressedKey);
                } else {
                    this.handleSingleKey(pressedKey);
                }
            }

            handleSingleKey(pressedKey) {
                this.totalCount++;
                
                if (pressedKey === this.currentKey) {
                    this.correctCount++;
                    this.showFeedback('correct');
                } else {
                    this.showFeedback('wrong');
                }

                this.updateDisplay();
                
                if (this.isPlaying) {
                    setTimeout(() => this.generateNewKey(), this.speed || 1500);
                }
            }

            handleTypingKey(pressedKey) {
                if (this.currentIndex >= this.currentWord.length) return;
                
                let expectedChar = this.currentWord[this.currentIndex].toLowerCase();
                
                if (this.currentMode === 'zuowen') {
                    // ‰ΩúÊñáÊ®°ÂºèÔºöÊòæÁ§∫‰∏≠ÊñáÔºåËæìÂÖ•ÂÆåÊï¥ÊãºÈü≥
                    const expectedPinyin = pinyinMap[this.currentWord[this.currentIndex]] || '';
                    
                    // ÂàùÂßãÂåñÊãºÈü≥ËæìÂÖ•Áä∂ÊÄÅ
                    if (!this.pinyinProgress) {
                        this.pinyinProgress = '';
                        this.currentPinyin = expectedPinyin;
                    }
                    
                    // Ëé∑ÂèñÂΩìÂâçÊúüÊúõÁöÑÊãºÈü≥Â≠óÊØç
                    const expectedNextLetter = this.currentPinyin[this.pinyinProgress.length];
                    
                    if (pressedKey.toLowerCase() === expectedNextLetter) {
                        // Ê≠£Á°ÆÊåâÈîÆÔºåÁ¥ØÂä†ÊãºÈü≥ËøõÂ∫¶
                        this.pinyinProgress += pressedKey.toLowerCase();
                        this.correctCount++;
                        
                        // Ê£ÄÊü•ÊãºÈü≥ÊòØÂê¶ÂÆåÊàê
                        if (this.pinyinProgress === this.currentPinyin) {
                            // ÂΩìÂâçÊ±âÂ≠óÊãºÈü≥ÂÆåÊàêÔºåÁ´ãÂç≥ÁßªÂä®Âà∞‰∏ã‰∏Ä‰∏™Ê±âÂ≠óÔºàÊó†Âª∂ËøüÔºâ
                            this.currentIndex++;
                            this.pinyinProgress = '';
                            
                            if (this.currentIndex >= this.currentWord.length) {
                                // Âè•Â≠êÂÆåÊàêÔºåÂø´ÈÄüËøõÂÖ•‰∏ã‰∏Ä‰∏™
                                this.showFeedback('correct');
                                setTimeout(() => this.generateNewKey(), 300); // Âø´ÈÄüÂª∂Ëøü300ms
                            } else {
                                // Á´ãÂç≥ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Ê±âÂ≠óÔºåÊó†Âª∂Ëøü
                                this.displayZuowenText();
                            }
                        } else {
                            // ÁªßÁª≠ËæìÂÖ•ÂΩìÂâçÊ±âÂ≠óÁöÑÊãºÈü≥ÔºåÊó†Âª∂Ëøü
                            this.displayZuowenText();
                        }
                    } else {
                        this.showFeedback('wrong');
                    }
                } else {
                    // ‰ºòÂåñÂêéÁöÑÂçïËØçÂíåÂè•Â≠êÊ®°Âºè
                    if (pressedKey === expectedChar || (expectedChar === ' ' && pressedKey === ' ')) {
                        this.correctCount++;
                        this.currentIndex++;
                        
                        if (this.currentIndex >= this.currentWord.length) {
                            // ÂçïËØç/Âè•Â≠êÂÆåÊàêÔºåÂø´ÈÄüËøõÂÖ•‰∏ã‰∏Ä‰∏™
                            this.showFeedback('correct');
                            setTimeout(() => this.generateNewKey(), 300); // Âø´ÈÄüÂª∂Ëøü300ms
                        } else {
                            // Á´ãÂç≥ÊòæÁ§∫‰∏ã‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÊó†Âª∂Ëøü
                            this.displayTypingText();
                        }
                    } else {
                        this.showFeedback('wrong');
                    }
                }
                
                this.totalCount++;
                this.updateDisplay();
            }

            showFeedback(type) {
                this.targetKeyEl.classList.add(type);
                
                // È´ò‰∫ÆÂØπÂ∫îÁöÑÈîÆÁõòÊåâÈîÆ
                const keyEl = document.querySelector(`[data-key="${this.currentKey}"]`);
                if (keyEl) {
                    keyEl.classList.add(type);
                    setTimeout(() => {
                        keyEl.classList.remove(type);
                    }, 500);
                }

                setTimeout(() => {
                    this.targetKeyEl.classList.remove(type);
                }, 500);
            }

            highlightKey(key) {
                const keyEl = document.querySelector(`[data-key="${key}"]`);
                if (keyEl) {
                    keyEl.classList.add('active');
                    setTimeout(() => {
                        keyEl.classList.remove('active');
                    }, 200);
                }
            }

            clearAllHighlights() {
                document.querySelectorAll('.key').forEach(key => {
                    key.classList.remove('correct', 'wrong', 'active', 'target');
                });
            }

            updateDisplay() {
                const accuracy = this.totalCount > 0 ? Math.round((this.correctCount / this.totalCount) * 100) : 0;
                this.accuracyEl.textContent = accuracy + '%';
                this.correctEl.textContent = this.correctCount;
                this.totalEl.textContent = this.totalCount;
            }
        }

        // ÂêØÂä®Ê∏∏Êàè
        const game = new KeyboardGame();
    </script>
</body>
</html>